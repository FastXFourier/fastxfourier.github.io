# [toi20_orbs](https://programming.in.th/tasks/toi20_orbs/)

## Problem
### ‡∏™‡∏£‡∏∏‡∏õ‡πÇ‡∏à‡∏ó‡∏¢‡πå
‡∏°‡∏µ‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß $N$ ‡∏•‡∏π‡∏Å ‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà $i$ ‡∏´‡∏ô‡∏±‡∏Å $w_i$ ‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡∏≠‡∏á‡∏•‡∏π‡∏Å $L$ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÇ‡∏î‡∏¢‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÜ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà $a$ ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏π‡∏Å‡πÅ‡∏£‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà $b$ ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£

‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö $p,q$ ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏π‡∏Å‡πÅ‡∏£‡∏Å‡∏Å‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£:‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏à‡∏∞‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏•‡∏π‡∏Å‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å $q-p$ ‡∏Å‡∏±‡∏ö‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å $‚åä\frac{p+q}{2}‚åã$ ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÅ‡∏ó‡∏ô

‡πÉ‡∏´‡πâ print ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÑ‡∏õ‡∏°‡∏≤‡∏Å

‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: $‚åäx‚åã$ ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á floor function ‡∏Ç‡∏≠‡∏á $x$ ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö $x$

!!! note "Prerequisites"
    - Multiset

!!! note "Constraints"
    - $2 \leq N \leq 2\cdot 10^6$
    - $1 \leq L \leq 2\cdot 10^6$
    - $1\leq a < b \leq N$
    - $1 \leq w_i \leq 10^9$

## Solution
### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥

‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà $a$ ‡∏Å‡∏±‡∏ö $b$ ‡πÄ‡∏™‡∏°‡∏≠‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡πÅ‡∏Ñ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Data Structure ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà $a$ ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà $b$ ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏à‡∏∂‡∏á‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ multiset ‡πÄ‡∏õ‡πá‡∏ô Data Structure ‡∏ô‡∏±‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ
![](https://i.ibb.co/HDXZDQHR/image.png)

‡πÇ‡∏î‡∏¢
1.‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡πÉ‡∏ô multiset1 ‡∏ó‡∏∏‡∏Å‡∏•‡∏π‡∏Å‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡πÉ‡∏ô multiset2 ‡∏ó‡∏∏‡∏Å‡∏•‡∏π‡∏Å
2.‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡πÉ‡∏ô multiset2 ‡∏ó‡∏∏‡∏Å‡∏•‡∏π‡∏Å‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡πÉ‡∏ô multiset3 ‡∏ó‡∏∏‡∏Å‡∏•‡∏π‡∏Å

‡∏ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ $p$ ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÉ‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà $a$ ‡πÅ‡∏•‡∏∞ $q$ ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÉ‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà $b$ 
‡∏à‡∏∞‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤ $q-p,‚åä\frac{p+q}{2}‚åã \leq q$ ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏™‡πà‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏£‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡πÉ‡∏ô multiset1 ‡∏´‡∏£‡∏∑‡∏≠ multiset2 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÇ‡∏î‡∏¢‡πÉ‡∏™‡πà‡πÉ‡∏ô multiset2 ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏¢‡πâ‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏°‡∏≤‡πÉ‡∏ô multiset1 ‡πÇ‡∏î‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç 1 ‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á

## Solution Code:

```cpp title="toi20_orbs.cpp"
#include <bits/stdc++.h>
using namespace std;

int main(){
    cin.tie(NULL)->sync_with_stdio(false);
    int n, t, l, r;
    cin >> n >> t >> l >> r;
    vector <int> v(n);
    for(int i = 0; i < n; i++) cin >> v[i];
    sort(v.begin(), v.end());
    multiset<int> a, b, o;
    for(int i = 0; i < l; i++){
        a.insert(v[i]);
    }
    for(int i = l; i < r; i++){
        b.insert(v[i]);
    }
    for(int i = r; i < n; i++){
        o.insert(v[i]);
    }

    while(t--){
        int x = *--a.end();
        int y = *--b.end();
        a.erase(--a.end());
        b.erase(--b.end());
        int new1 = y - x, new2 = (x + y) / 2;
        b.insert(new1);
        b.insert(new2);
        int firstB = *b.begin();
        b.erase(b.begin());
        a.insert(firstB);
        if (*--a.end() > *b.begin()) {
            int temp1 = *--a.end(), temp2 = *b.begin();
            a.erase(--a.end());
            b.erase(b.begin());
            a.insert(temp2);
            b.insert(temp1);
        }
    }

    for(int i : a) cout << i << ' ';
    for(int i : b) cout << i << ' ';
    for(int i : o) cout << i << ' ';
}
```

## Time Complexity: $O(N\log N)$

‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏™‡∏á‡∏™‡∏±‡∏¢ comment ‡πÑ‡∏ß‡πâ‡πÉ‡∏ï‡πâ post ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö üôá‚Äç‚ôÇÔ∏èüôá‚Äç‚ôÇÔ∏è  